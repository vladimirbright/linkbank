(function(a){var l,m;l=function(f,k){f.focus(function(){f.val()==k.initial&&f.val("")}).blur(function(){a.trim(f.val())==""&&f.val(k.initial)})};m={initial:false};a.fn.placeholder=function(f){opts=a.extend({},m,f);return this.filter(":input").each(function(){$this=a(this);if(opts.initial===false)return false;l($this,opts)})}})(jQuery);
(function(a){var l,m,f,k,h;k=function(g,b,e){g.html(e);g.dialog("option","position","center")};f=function(g,b){var e;b.dialog("option","position","center");e=a.extend({type:"POST",cache:false,url:g,data:a(b).find("form").first().serialize(),beforeSend:function(){b.html(h.loader);b.dialog("option","position","center");return true},success:function(i){b.html(i);i.toLowerCase().indexOf("<form")===-1&&b.dialog("option","buttons",{Close:function(){a("#"+h.container_id).trigger("reload");b.dialog("close")}});
b.dialog("option","position","center")},error:function(i,c,d){k(b,i,c,d)}},h.send_ajax_params);a.ajax(e)};m=function(g){var b,e;b=g.attr("href")||g.attr("rel");if(b===null||b=="")return false;e=a("<div></div>",{title:g.attr("title")||""});a(e).dialog(a.extend({},{modal:true,open:function(){var i;e.html(h.loader);i=a.extend({type:"GET",url:b,cache:false,success:function(c){e.html(c);e.dialog("option","position","center")},error:function(c,d,p){k(e,c,d,p)}},h.load_ajax_params);a.ajax(i)},buttons:{Ok:function(){f(b,
e)},Cancel:function(){a(this).dialog("close")}}},h.dialog_opts))};l={loader:a("<div></div>",{"class":"ajax_bar_div"}),load_ajax_params:{type:"GET",cache:false},send_ajax_params:{type:"POST",cache:false},dialog_opts:{},container_id:"main_container"};h={};a.fn.bookmarks=function(g,b){h=a.extend({},l,b);a("#"+h.container_id).delegate(g,"click",function(){m(a(this));return false})}})(jQuery);
(function(a){var l,m,f,k,h,g,b,e,i;b={};h=function(c){return[c.split("=")]};g=function(){return a(this).length==2};m=function(){var c,d;c=location.hash;c=c.replace(/^#/,"");c=a(a.map(c.split("&"),h)).filter(g);d={};a(c).each(function(p,n){var j,o;j=n[0];o=n[1];if(b.placeholders.indexOf(j)!==-1)if(j in d)b.arrays.indexOf(j)!==-1&&d[j].push(o);else if(b.arrays.indexOf(j)!==-1){d[j]=[];d[j].push(o)}else d[j]=o});return d};f=function(c){var d;d="#";a(b.placeholders).each(function(p,n){if(n in c!==false)if(b.arrays.indexOf(n)!==
-1===false)d=d+n+"="+c[n]+"&";else a(c[n]).each(function(j,o){d=d+j+"="+o+"&"})});location.hash=d};e=function(){var c,d;c=a(b.search_selector).val();d=m();d[b.placeholders[0]]=c;f(d)};i=false;k=function(){var c,d;d=location.hash.replace(/^#/,"");c=b.url+"?"+d;i!==false&&clearTimeout(i);i=setTimeout(function(){a("#"+b.container_id).load(c)},b.timeout)};l={url:false,container_id:"main_container",placeholders:["q","s","tags","page"],arrays:["tags"],timeout:1E3,tag_selector:".tag_sel",sort_selector:".sort",
search_selector:"#id_q"};a.fn.navigation=function(c){b=a.extend({},l,c);if(b.url===false)return false;a("#"+b.container_id).bind("reload",function(){e();k();return false});a(this).click(function(){a("#"+b.container_id).trigger("reload");return false});a(b.search_selector).keyup(function(){e();a("#"+b.container_id).trigger("reload");return false})}})(jQuery);
